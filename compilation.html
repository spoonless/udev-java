
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Compilation &amp; exécution &#8212; documentation Le langage Java 1.0</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="La structure fondamentale du langage" href="structure_fondamentale.html" />
    <link rel="prev" title="Installation" href="installation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="compilation-execution">
<h1>Compilation &amp; exécution<a class="headerlink" href="#compilation-execution" title="Lien permanent vers ce titre">¶</a></h1>
<p>Dans ce chapitre, nous n’allons pas directement nous intéresser au langage Java.
Nous allons plutôt essayer de comprendre les mécanismes sous-jacents à la compilation et à l’exécution
d’un programme Java. Nous verrons également comment créer un projet dans Eclipse.</p>
<div class="section" id="un-premier-programme">
<h2>Un premier programme<a class="headerlink" href="#un-premier-programme" title="Lien permanent vers ce titre">¶</a></h2>
<p>Nous allons utiliser comme exemple la programme Java suivant :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Ce programme n&#39;est pas très intéressant</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PremierProgramme</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Hello World!&quot;</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>La syntaxe du langage nous importe peu pour l’instant. Ce programme Java va simplement écrire
le message «&nbsp;Hello World!&nbsp;» sur la sortie standard.</p>
<p>Téléchargez le fichier <a class="reference download internal" href="_downloads/PremierProgramme.java" download=""><code class="xref download docutils literal"><span class="pre">PremierProgramme.java</span></code></a>
contenant ce code.</p>
</div>
<div class="section" id="la-compilation">
<h2>La compilation<a class="headerlink" href="#la-compilation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour pouvoir exécuter ce programme, nous allons devoir le compiler. Pour cela,
nous devons utiliser le programme <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html">javac</a> (Java Compiler) dont c’est la fonction.
Dans un terminal, il suffit de se rendre dans le répertoire où se situe le fichier
et de lancer la commande de compilation :</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /home/david/Workspace/workspace-java/exemple
$ javac PremierProgramme.java
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p>Si votre système ne connaît pas la commande <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html">javac</a> cela signifie simplement
que le répertoire contenant ce programme n’est pas déclaré dans le chemin d’exécution
du système. Il vous suffit de le rajouter ou de donner le chemin complet menant à
ce programme. Par exemple :</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>$ /opt/bin/jdk1.8/bin/javac PremierProgramme.java
</pre></div>
</div>
<p class="last">Le programme <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html">javac</a> est installé dans le sous-répertoire <strong>bin</strong> du répertoire
d’installation du JDK</p>
</div>
<p>La compilation devrait se passer sans problème et aboutir à la création du fichier
<strong>PremierProgramme.class</strong> dans le même répertoire que le fichier java.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Nous y reviendrons plus tard mais en Java, nous déclarons des classes (parfois un peu spéciales).
Un fichier source porte l’extension <strong>java</strong> et contient le code source d’une classe. Un fichier
résultant de la compilation porte le même nom que le fichier source mais avec l’extension <strong>class</strong>.
Ce fichier n’est pas directement éditable car il contient des instructions en bytecode compréhensibles
par la JVM.</p>
</div>
</div>
<div class="section" id="l-execution">
<h2>L’exécution<a class="headerlink" href="#l-execution" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’exécution d’un programme se fait par l’intermédiaire de la machine virtuelle. Pour invoquer cette
dernière, on utilise tout simplement la commande <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html">java</a> suivie du nom de la classe <strong>sans l’extension</strong> :</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>$ java PremierProgramme
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p>Si votre système ne connaît pas la commande <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html">java</a> cela signifie simplement
que le répertoire contenant ce programme n’est pas déclaré dans le chemin d’exécution
du système. Il vous suffit de le rajouter ou de donner le chemin complet menant à
ce programme. Par exemple :</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>$ /opt/bin/jdk1.8/bin/java PremierProgramme
</pre></div>
</div>
<p class="last">Le programme <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html">java</a> est installé dans le sous-répertoire <strong>bin</strong> du répertoire
d’installation du JDK</p>
</div>
<p>La commande <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html">java</a> va chercher le fichier PremierProgramme.class pour l’exécuter.
Cela signifie qu’à ce stade, vous n’êtes pas obligé de disposer du fichier source
PremierProgramme.java.</p>
</div>
<div class="section" id="la-liaison-dynamique">
<h2>La liaison dynamique<a class="headerlink" href="#la-liaison-dynamique" title="Lien permanent vers ce titre">¶</a></h2>
<p>Tous les langages de programmation évolués utilisent la notion de liaison (<strong>link</strong>).
En effet, il est nécessaire à un moment donné de pouvoir créer un programme à partir
de plusieurs fichiers source. Généralement, les fichiers source sont compilés un à un
puis un mécanisme de liaison permet de gérer les dépendances entre chacun des fichiers.
En programmation, on distingue la liaison <strong>statique</strong> et la liaison <strong>dynamique</strong>.</p>
<p>La liaison statique est une étape qui intervient après la compilation et qui permet
de regrouper l’ensemble des fichiers compilés dans un fichier exécutable unique. Les langages
tels que C et C++ supportent la liaison statique.</p>
<p>La liaison dynamique est une étape qui intervient au moment du lancement du programme.
On vérifie que les fichiers compilés sont disponibles pour l’exécution.</p>
<p>Java ne supporte que la liaison dynamique. Cela signifie que chaque fichier compilé
donnera un fichier class. Cela signifie également qu’un programme Java est en fait
une collection de plusieurs fichiers class.</p>
<p>Si votre programme est dépendant d’une bibliothèque tierce en Java, vous devez également fournir
les fichiers de cette bibliothèque au moment de l’exécution.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Il est impossible d’écrire un programme Java qui n’ait aucune dépendance avec d’autres
fichiers class. Dans notre exemple, même simple, nous sommes dépendants de la classe
<strong>System</strong>. Nous sommes même dépendants de la classe <strong>Object</strong> alors que ce mot
n’est pas présent dans le fichier source. Heureusement, ces classes font partie
de la bibliothèque standard de Java qui est disponible avec l’environnement d’exécution.
Nous n’avons donc pas à nous préoccuper de comment la JVM va trouver le code pour
ces classes. Mais elle le fera bel et bien en utilisant le mécanisme de liaison
dynamique.</p>
</div>
</div>
<div class="section" id="le-classpath">
<h2>Le classpath<a class="headerlink" href="#le-classpath" title="Lien permanent vers ce titre">¶</a></h2>
<p>La liaison dynamique implique qu’un programme Java est une collection de fichiers.
Ces fichiers peuvent se trouver à différents endroits dans le système de fichiers.
Il faut donc un mécanisme pour permettre de les localiser. En Java, on utilise
le <strong>classpath</strong> : le chemin des classes. On peut par exemple spécifier un
ou plusieurs chemins avec le paramètre <strong>-classpath</strong> aux commandes <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html">java</a> et <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html">javac</a>
indiquant les répertoires à partir desquels il est possible de trouver des fichiers
class.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>$ java -classpath /home/david/Workspace/workspace-java/exemple PremierProgramme
</pre></div>
</div>
<p>La commande ci-dessus peut être exécutée à partir de n’importe quel répertoire
puisqu’elle précise un classpath. La JVM tentera de chercher un fichier PremierProgramme.class
dans le répertoire <em>/home/david/Workspace/workspace-java/exemple</em>.</p>
<p>S’il existe des répertoires contenant des fichiers class que vous utilisez souvent,
vous pouvez les inclure implicitement dans le classpath on déclarant ces répertoires
dans la variable d’environnement <strong>CLASSPATH</strong>.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">CLASSPATH</span><span class="o">=</span>/home/david/Workspace/workspace-java/exemple
$ java PremierProgramme
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Même si le principe du classpath est simple, cela peut amener à des situations
très complexes dans les projets. Si on indique plusieurs chemins, on peut avoir
des répertoires utilisés comme classpath contenant des classes avec des nom identiques
mais avec des comportements différents. On peut aussi exécuter à son insu du code malicieux.
Depuis Java 9, un nouveau système baptisé <em>Jigsaw</em> et basé sur la notion de module a fait son apparition.
Mais il faudra certainement plusieurs années avant que ce système ne remplace
définitivement le mécanisme du classpath.</p>
</div>
</div>
<div class="section" id="bibliotheques-java-les-fichiers-jar">
<h2>Bibliothèques Java : les fichiers JAR<a class="headerlink" href="#bibliotheques-java-les-fichiers-jar" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si on se rappelle qu’un programme Java est une collection de fichiers class et qu’il n’est pas rare
qu’un programme ait besoin de centaines voire de milliers de ces fichiers alors on se rend vite
compte qu’il n’est pas très facile de distribuer un programme Java sous cette forme.</p>
<p>Pour palier à ce problème, on peut utiliser des fichiers jar. JAR signifie <em>Java ARchive</em> :
il s’agit d’un fichier zip contenant un ensemble de fichiers class mais qui a l’extension <strong>.jar</strong>.
Java fournit l’utilitaire <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/jar.html">jar</a> pour créer une archive :</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>$ jar -cf monappli.jar PremierProgramme.class
</pre></div>
</div>
<p>L’utilitaire <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/jar.html">jar</a> reprend la syntaxe de <strong>tar</strong> sous les systèmes *NIX.</p>
<p>Un fichier JAR peut être ajouté au classpath rendant ainsi disponible l’ensemble
des fichiers qu’il contient.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">CLASSPATH</span><span class="o">=</span>/home/david/Workspace/workspace-java/exemple/monappli.jar
$ java PremierProgramme
</pre></div>
</div>
<p>C’est un moyen simple de distribuer son code. Toutes les bibliothèques tierces
Java sont disponibles sous la forme d’un fichier JAR.</p>
</div>
<div class="section" id="creation-d-un-projet-dans-eclipse">
<h2>Création d’un projet dans Eclipse<a class="headerlink" href="#creation-d-un-projet-dans-eclipse" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est utile de comprendre le fonctionnement des outils tels que <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html">java</a> ou <a class="reference external" href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html">javac</a>
mais ils ne sont pas d’une utilisation très aisée pour de vrais projets. On
préférera utiliser un outil de build comme <a class="reference external" href="http://ant.apache.org">Ant</a>, <a class="reference external" href="http://maven.apache.org">Maven</a> ou <a class="reference external" href="https://gradle.org">Gradle</a> pour automatiser
la compilation et un environnement de développement intégré comme <a class="reference external" href="https://eclipse.org">Eclipse</a>
pour le développement.</p>
<p>Eclipse fournit des avantages précieux pour les développeurs. Notamment :</p>
<ul class="simple">
<li>Eclipse compile automatiquement les fichiers lorsqu’ils sont sauvés. Il est donc
possible d’avoir immédiatement un retour sur les éventuelles erreurs de syntaxe ou autres.</li>
<li>Eclipse offre un environnement riche pour manipuler et modifier les fichiers sources.</li>
</ul>
<p>Quelques raccourcis clavier utiles dans Eclipse :</p>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-text">Raccourcis clavier</span><a class="headerlink" href="#id1" title="Lien permanent vers ce tableau">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>CTRL + espace</td>
<td>Complétion de code</td>
</tr>
<tr class="row-even"><td>CTRL + 1 (ou CTRL + SHIFT + 1)</td>
<td>Suggestions</td>
</tr>
<tr class="row-odd"><td>SHIFT + ALT + R</td>
<td>Renommer dans tous les fichiers</td>
</tr>
<tr class="row-even"><td>MAJ + CTRL + F</td>
<td>Reformater le code</td>
</tr>
<tr class="row-odd"><td>MAJ + CTRL + O</td>
<td>Organiser les imports</td>
</tr>
<tr class="row-even"><td>CTRL + SHIFT + T</td>
<td>Chercher le fichier d’une classe</td>
</tr>
<tr class="row-odd"><td>CTRL + SHIFT + R</td>
<td>Chercher une ressource (un fichier)</td>
</tr>
<tr class="row-even"><td>F11</td>
<td>Exécuter la classe courante</td>
</tr>
</tbody>
</table>
<p>On peut créer toutes sortes de projets différents dans Eclipse. Pour nous, le plus
utile sera bien sûr le projet Java. Pour cela, il suffit d’aller dans le menu
<em>File &gt; New &gt; Java Project</em>. On obtient alors la boite de dialogue suivante :</p>
<img alt="_images/eclipse_create_java_project.png" src="_images/eclipse_create_java_project.png" />
<p>Il suffit de donner le nom du projet et de cliquer sur <em>Finish</em>. Il se peut qu’Eclipse
ouvre ensuite une boîte de dialogue pour vous demander si vous voulez changer de
<em>perspective</em>. Dans Eclipse, une perspective est un agencement de l’espace de travail
adapté pour certaines tâches. Il existe par exemple une perspective Java adaptée
pour développer du code Java et une perspective Debug pour le debuggage du code.</p>
<p>Un fois le projet créé, on voit que Eclipse a ajouté automatiquement un répertoire <strong>src</strong>
destiné à accueillir les sources du projet. Il suffit d’ajouter le fichier
<a class="reference download internal" href="_downloads/PremierProgramme.java" download=""><code class="xref download docutils literal"><span class="pre">PremierProgramme.java</span></code></a> à cet endroit.</p>
<p>Comme indiqué ci-dessus, toute modification dans ce fichier entraînera automatiquement
sa compilation au moment de la sauvegarde.</p>
<p>Si l’on souhaite distribuer son projet, on peut, par exemple, produire un fichier JAR.
Pour cela, il suffit de faire un clic droit sur le nom du projet dans le <em>Package Explorer</em>
et de choisir <em>Export</em>. Dans la boîte de dialogue d’export, il faut chercher «&nbsp;jar&nbsp;» et sélectionner
<em>Java &gt; JAR File</em>. En cliquant sur <em>Next</em>, on spécifie le nom et l’emplacement du fichier JAR
et il sera créé en cliquant sur <em>Finish</em>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Le langage Java</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Compilation &amp; exécution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#un-premier-programme">Un premier programme</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-compilation">La compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l-execution">L’exécution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-liaison-dynamique">La liaison dynamique</a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-classpath">Le classpath</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bibliotheques-java-les-fichiers-jar">Bibliothèques Java : les fichiers JAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-d-un-projet-dans-eclipse">Création d’un projet dans Eclipse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structure_fondamentale.html">La structure fondamentale du langage</a></li>
<li class="toctree-l1"><a class="reference internal" href="premiere_classe.html">Une première classe</a></li>
<li class="toctree-l1"><a class="reference internal" href="types_primitifs.html">Les types primitifs</a></li>
<li class="toctree-l1"><a class="reference internal" href="operateurs.html">Les opérateurs</a></li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a></li>
<li class="toctree-l1"><a class="reference internal" href="tableau.html">Les tableaux</a></li>
<li class="toctree-l1"><a class="reference internal" href="attributs_et_methodes.html">Attributs &amp; méthodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="cycle_de_vie.html">Cycle de vie d’un objet</a></li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Les packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="relations_entre_objets.html">Les relations entre objets</a></li>
<li class="toctree-l1"><a class="reference internal" href="polymorphisme.html">Le polymorphisme</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_object.html">La classe Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_string.html">La classe String</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_exceptions.html">Les exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="classe_abstraite.html">Les classes abstraites</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Les interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="generiques.html">Méthodes et classes génériques</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_collections.html">Les collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="entrees_sorties.html">Les entrées/sorties</a></li>
<li class="toctree-l1"><a class="reference internal" href="enumeration.html">Les énumérations</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_dates.html">Les dates</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_lambdas.html">Les lambdas</a></li>
<li class="toctree-l1"><a class="reference internal" href="streams.html">Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="classe_interne.html">Les classes internes</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_annotations.html">Les annotations</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/api/index.html?overview-summary.html">API Java</a></li>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/">Documentation Java</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;
<a ref="author" href="mailto:david.gayerie.epsi@mailoo.org">David Gayerie</a>
<a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/fr/80x15.png" /></a>
.
      
    </div>

    

    
  </body>
</html>