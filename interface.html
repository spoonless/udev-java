
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Les interfaces &#8212; documentation Le langage Java 1.0</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Méthodes et classes génériques" href="generiques.html" />
    <link rel="prev" title="Les dates" href="les_dates.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="les-interfaces">
<h1>Les interfaces<a class="headerlink" href="#les-interfaces" title="Lien permanent vers ce titre">¶</a></h1>
<p>Une interface permet de définir un ensemble de services qu’un client peut
obtenir d’un objet. Une interface introduit une abstraction pure qui permet
un découplage maximal entre un service et son implémentation. On retrouve
ainsi les interfaces au cœur de l’implémentation de beaucoup de bibliothèques
et de frameworks. Le mécanisme des interfaces permet d’introduire également une
forme simplifiée d’héritage multiple.</p>
<div class="section" id="declaration-d-un-interface">
<h2>Déclaration d’un interface<a class="headerlink" href="#declaration-d-un-interface" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une interface se déclare avec le mot-clé <strong>interface</strong>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Compte</span> <span class="o">{</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Comme pour une classe, une interface a une portée, un nom et un bloc de
déclaration. Une interface est déclarée dans son propre fichier qui porte le même
nom que l’interface. Pour l’exemple ci-dessus, le fichier doit s’appeler
<em>Compte.java</em>.</p>
<p>Une interface décrit un ensemble de méthodes en fournissant uniquement leur
signature.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Compte</span> <span class="o">{</span>

  <span class="kt">void</span> <span class="nf">deposer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                   <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">retirer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                  <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">;</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Une interface introduit un nouveau type d’abstraction qui définit à travers
ces méthodes un ensemble d’interactions autorisées.
Une classe peut ensuite implémenter une ou plusieurs interfaces.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Les méthodes d’une interface sont par défaut <strong>public</strong> et <strong>abstract</strong>. Il
n’est pas possible de déclarer une autre portée que <strong>public</strong>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Mobile</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">deplacer</span><span class="o">();</span>

<span class="o">}</span>
</pre></div>
</div>
<p>L’interface ci-dessus est strictement identique à celle-ci :</p>
<div class="last highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Mobile</span> <span class="o">{</span>

  <span class="kt">void</span> <span class="nf">deplacer</span><span class="o">();</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="implementation-d-une-interface">
<h2>Implémentation d’une interface<a class="headerlink" href="#implementation-d-une-interface" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une classe signale les interfaces qu’elle implémente grâce au mot-clé <strong>implements</strong>.
Une classe concrète doit fournir une implémentation pour toutes les méthodes
d’une interface, soit dans sa déclaration, soit parce qu’elle en hérite.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CompteBancaire</span> <span class="kd">implements</span> <span class="n">Compte</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">numero</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">balance</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">CompteBancaire</span><span class="o">(</span><span class="n">String</span> <span class="n">numero</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">numero</span> <span class="o">=</span> <span class="n">numero</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deposer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">balance</span> <span class="o">+=</span> <span class="n">montant</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">retirer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">balance</span> <span class="o">&lt;</span> <span class="n">montant</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">OperationInterrompueException</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">balance</span> <span class="o">-=</span> <span class="n">montant</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">balance</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getNumero</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">numero</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>L’implémentation des méthodes d’une interface suit les mêmes règles que la surcharge.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Si la classe qui implémente l’interface est une classe abstraite, alors elle n’est
pas obligée de fournir une implémentation pour les méthodes de l’interface.</p>
</div>
<p>Même si les mécanismes des interfaces sont proches de ceux des classes abstraites,
ces deux notions sont clairement distinctes. Une classe abstraite permet de mutualiser
une implémentation dans une hiérarchie d’héritage en introduisant un type plus abstrait.
Une interface permet de définir les interactions possibles entre un objet et
ses clients. Une interface agit comme un contrat que les deux parties doivent
remplir. Comme l’interface n’impose pas de s’insérer dans une hiérarchie d’héritage,
il est relativement simple d’adapter une classe pour qu’elle implémente une interface.</p>
<p>Une interface introduit un nouveau type de relation qui serait du type <em>est
comme un</em> (<em>is-like-a</em>).</p>
<p>Par exemple, il est
possible de créer un système de gestion de comptes utilisant l’interface
<em>Compte</em>. Il est facile ensuite de fournir une implémentation de cette interface
pour un compte bancaire, un porte-monnaie électronique, un compte en ligne…
t
Une classe peut implémenter plusieurs interfaces si nécessaire. Pour cela, il
suffit de donner les noms des interfaces séparés par une virgule.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.animal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Carnivore</span> <span class="o">{</span>

  <span class="kt">void</span> <span class="nf">manger</span><span class="o">(</span><span class="n">Animal</span> <span class="n">animal</span><span class="o">);</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.animal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Herbivore</span> <span class="o">{</span>

  <span class="kt">void</span> <span class="nf">manger</span><span class="o">(</span><span class="n">Vegetal</span> <span class="n">vegetal</span><span class="o">);</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.animal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Humain</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="kd">implements</span> <span class="n">Carnivore</span><span class="o">,</span> <span class="n">Herbivore</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">manger</span><span class="o">(</span><span class="n">Animal</span> <span class="n">animal</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">manger</span><span class="o">(</span><span class="n">Vegetal</span> <span class="n">vegetal</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Dans l’exemple précédent, la classe <em>Humain</em> implémente les interfaces
<em>Carnivore</em> et <em>Herbivore</em>. Donc une instance de la classe <em>Humain</em> peut
être utilisée dans une application partout où les types <em>Carnivore</em> et <em>Herbivore</em>
sont attendus.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Humain</span> <span class="n">humain</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Humain</span><span class="o">();</span>

<span class="n">Carnivore</span> <span class="n">carnivore</span> <span class="o">=</span> <span class="n">humain</span><span class="o">;</span>
<span class="n">carnivore</span><span class="o">.</span><span class="na">manger</span><span class="o">(</span><span class="k">new</span> <span class="n">Poulet</span><span class="o">());</span> <span class="c1">// Poulet hérite de Animal</span>

<span class="n">Herbivore</span> <span class="n">herbivore</span> <span class="o">=</span> <span class="n">humain</span><span class="o">;</span>
<span class="n">herbivore</span><span class="o">.</span><span class="na">manger</span><span class="o">(</span><span class="k">new</span> <span class="n">Chou</span><span class="o">());</span>   <span class="c1">// Chou hérite de Vegetal</span>
</pre></div>
</div>
</div>
<div class="section" id="attributs-et-methodes-statiques">
<h2>Attributs et méthodes statiques<a class="headerlink" href="#attributs-et-methodes-statiques" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une interface peut déclarer des attributs. Cependant tous les attributs d’une
interface sont par défaut <strong>public</strong>, <strong>static</strong> et <strong>final</strong>. Il n’est
pas possible de modifier la portée de ces attributs. Autrement
dit, une interface ne peut déclarer que des constantes.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Compte</span> <span class="o">{</span>

  <span class="kt">int</span> <span class="n">PLAFOND_DEPOT</span> <span class="o">=</span> <span class="mi">1_000_000</span><span class="o">;</span>

  <span class="kt">void</span> <span class="nf">deposer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span> <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">retirer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span> <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">;</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>On peut préciser <strong>public</strong>, <strong>static</strong> et <strong>final</strong> dans la déclaration d’un
attribut d’interface :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">PLAFOND_DEPOT</span> <span class="o">=</span> <span class="mi">1_000_000</span><span class="o">;</span>
</pre></div>
</div>
<p>Ceci est strictement équivalent à</p>
<div class="last highlight-java"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">PLAFOND_DEPOT</span> <span class="o">=</span> <span class="mi">1_000_000</span><span class="o">;</span>
</pre></div>
</div>
</div>
<p>Une interface peut également déclarer des méthodes <strong>static</strong>. Dans ce cas,
il s’agit de méthodes équivalentes aux méthodes de classe et l’interface doit
fournir une implémentation pour ces méthodes. Ces méthodes doivent explicitement
avoir le mot-clé <strong>static</strong> et elles ont une portée publique par défaut.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Compte</span> <span class="o">{</span>

  <span class="kt">int</span> <span class="n">PLAFOND_DEPOT</span> <span class="o">=</span> <span class="mi">1_000_000</span><span class="o">;</span>

  <span class="kd">static</span> <span class="kt">int</span> <span class="nf">getBalanceTotale</span><span class="o">(</span><span class="n">Compte</span><span class="o">...</span> <span class="n">comptes</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Compte</span> <span class="n">c</span> <span class="o">:</span> <span class="n">comptes</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">total</span> <span class="o">+=</span> <span class="n">c</span><span class="o">.</span><span class="na">getBalance</span><span class="o">();</span>

    <span class="o">}</span>
    <span class="k">return</span> <span class="n">total</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">deposer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span> <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">retirer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span> <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">;</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="heritage-d-interface">
<h2>Héritage d’interface<a class="headerlink" href="#heritage-d-interface" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une interface peut hériter d’autres interfaces. Contrairement aux classes qui
ne peuvent avoir qu’une classe parente, une interface peut avoir autant d’interfaces
parentes que nécessaire. Pour déclarer un héritage, on utilise le mot-clé
<strong>extends</strong>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.animal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Omnivore</span> <span class="kd">extends</span> <span class="n">Carnivore</span><span class="o">,</span> <span class="n">Herbivore</span> <span class="o">{</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Une classe concrète qui implémente une interface doit donc disposer d’une implémentation
pour les méthodes de cette interface mais également pour toutes les méthodes des
interfaces dont cette dernière hérite.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.animal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Humain</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="kd">implements</span> <span class="n">Omnivore</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">manger</span><span class="o">(</span><span class="n">Animal</span> <span class="n">animal</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">manger</span><span class="o">(</span><span class="n">Vegetal</span> <span class="n">vegetal</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>L’héritage d’interface permet d’introduire de nouveaux types par agrégat. Dans
l’exemple ci-dessus, nous faisons apparaître la notion d’omnivore simplement
comme étant à la fois un carnivore et un herbivore.</p>
</div>
<div class="section" id="les-interfaces-marqueurs">
<span id="interface-marqueur"></span><h2>Les interfaces marqueurs<a class="headerlink" href="#les-interfaces-marqueurs" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme chaque interface introduit un nouveau type, il est possible de contrôler
grâce au mot-clé <strong>instanceof</strong> qu’une variable, un paramètre ou un attribut
est bien une instance compatible avec cette interface.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Humain</span> <span class="n">bob</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Humain</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="n">bob</span> <span class="k">instanceof</span> <span class="n">Carnivore</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;bob mange de la viande&quot;</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>En Java, on utilise cette possibilité pour créer des interfaces marqueurs. Une
interface marqueur n’a généralement pas de méthode, elle sert juste à introduire
un nouveau type. Il est ensuite possible de changer le comportement d’une méthode
si une variable, un paramètre ou un attribut implémente cette interface.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.animal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Cannibale</span> <span class="o">{</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.animal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Humain</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="kd">implements</span> <span class="n">Omnivore</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">manger</span><span class="o">(</span><span class="n">Animal</span> <span class="n">animal</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!(</span><span class="n">animal</span> <span class="k">instanceof</span> <span class="n">Humain</span><span class="o">)</span> <span class="o">||</span> <span class="k">this</span> <span class="k">instanceof</span> <span class="n">Cannibale</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// ...</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">manger</span><span class="o">(</span><span class="n">Vegetal</span> <span class="n">vegetal</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, <em>Cannibale</em> agit comme une interface marqueur, elle
permet à une classe héritant de <em>Humain</em> de manger une instance d’humain. Pour
cela, il suffit de déclarer que cette nouvelle classe implémente <em>Cannibale</em> :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.animal</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Anthropophage</span> <span class="kd">extends</span> <span class="n">Humain</span> <span class="kd">implements</span> <span class="n">Cannibale</span> <span class="o">{</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Même si la classe <em>Anthropophage</em> ne surcharge aucune méthode de sa classe
parente, le fait de déclarer l’interface marqueur <em>Cannibale</em> suffit a modifier
son comportement.</p>
<p>Le principe de l’interface marqueur est quelques fois utilisé dans l’API standard
de Java. Par exemple, La méthode <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--">clone</a> déclarée par <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html">Object</a> jette une
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/CloneNotSupportedException.html">CloneNotSupportedException</a> si elle est appelée sur une instance qui n’implémente
pas l’interface <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Cloneable.html">Cloneable</a>. Cela permet de fournir une méthode par défaut pour créer
une copie d’un objet mais sans activer la fonctionnalité. Il faut
que la classe déclare son intention d’être clonable grâce à l’interface
marqueur.</p>
</div>
<div class="section" id="implementation-par-defaut">
<h2>Implémentation par défaut<a class="headerlink" href="#implementation-par-defaut" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est parfois difficile de faire évoluer une application qui utilise intensivement
les interfaces. Reprenons notre exemple du <em>Compte</em>. Imaginons que nous souhaitions
ajouter la méthode <em>transférer</em> qui consiste à transférer le solde d’un compte vers un autre.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Compte</span> <span class="o">{</span>

  <span class="kt">void</span> <span class="nf">deposer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                   <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">retirer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                  <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">;</span>

  <span class="kt">void</span> <span class="nf">transferer</span><span class="o">(</span><span class="n">Compte</span> <span class="n">destination</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                             <span class="n">CompteBloqueException</span><span class="o">;</span>

<span class="o">}</span>
</pre></div>
</div>
<p>En ajoutant une nouvelle méthode à notre interface, nous devons
fournir une implémentation pour cette méthode dans toutes les classes que nous avons
créées pour qu’elles continuent à compiler. Mais si d’autres équipes de développement
utilisent notre code et ont, elles-aussi, créé des implémentations pour l’interface
<em>Compte</em>, alors elles devront adapter leur code au moment d’intégrer la dernière
version de notre interface.</p>
<p>Comme les interfaces servent précisément à découpler deux implémentations, elles
sont très souvent utilisées dans les bibliothèques et les frameworks. D’un
côté, les interfaces introduisent une meilleure souplesse mais, d’un autre côté,
elles entraînent une grande rigidité car il peut être difficile de les faire
évoluer sans risquer de casser des implémentations existantes.</p>
<p>Pour palier partiellement à ce problème, une interface peut fournir une implémentation
par défaut de ses méthodes. Ainsi, si une classe concrète qui implémente cette interface
n’implémente pas une méthode par défaut, c’est le code de l’interface qui
s’exécutera. Une méthode par défaut doit obligatoirement avoir le mot-clé
<strong>default</strong> dans sa signature.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Compte</span> <span class="o">{</span>

  <span class="kt">void</span> <span class="nf">deposer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                   <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">retirer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                  <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">;</span>

  <span class="k">default</span> <span class="kt">void</span> <span class="nf">transferer</span><span class="o">(</span><span class="n">Compte</span> <span class="n">destination</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                                     <span class="n">CompteBloqueException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">destination</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kt">int</span> <span class="n">montant</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getBalance</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">montant</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">destination</span><span class="o">.</span><span class="na">deposer</span><span class="o">(</span><span class="n">montant</span><span class="o">);</span>
    <span class="kt">boolean</span> <span class="n">retraitOk</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">retirer</span><span class="o">(</span><span class="n">montant</span><span class="o">);</span>
      <span class="n">retraitOk</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(!</span><span class="n">retraitOk</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">destination</span><span class="o">.</span><span class="na">retirer</span><span class="o">(</span><span class="n">montant</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Une classe implémentant <em>Compte</em> n’a pas besoin de fournir une
implémentation pour la méthode <em>transferer</em>. La classe <em>CompteBancaire</em> que
nous avons implémentée au début de ce chapitre continuera de compiler et de
fonctionner comme attendu tout en ayant une méthode supplémentaire.</p>
<div class="admonition caution">
<p class="first admonition-title">Prudence</p>
<p class="last">L’implémentation par défaut de méthode dans une interface la rapproche beaucoup
du fonctionnement d’une classe abstraite. Cependant leurs usages sont différents.
L’implémentation d’une méthode dans une classe abstraite est courant car
la classe abstraite a cette notion de mutualisation de code. Par contre,
l’implémentation par défaut de méthode dans une interface est très rare.
Elle est réservée pour les types de situations décrits précédemment, afin
d’éviter de casser les implémentations existantes.</p>
</div>
</div>
<div class="section" id="la-segregation-d-interface">
<h2>La ségrégation d’interface<a class="headerlink" href="#la-segregation-d-interface" title="Lien permanent vers ce titre">¶</a></h2>
<p>En programmation objet, le <a class="reference external" href="https://en.wikipedia.org/wiki/Interface_segregation_principle">principe de ségrégation d’interface</a> stipule
qu’un client ne devrait pas avoir accès à plus de méthodes d’un objet
que ce dont il a vraiment besoin. L’objectif est de limiter au strict minimum
les interactions possibles entre un objet et ces clients afin d’assurer un couplage
minimal et faciliter ainsi les évolutions et le refactoring. En Java,
le <a class="reference external" href="https://en.wikipedia.org/wiki/Interface_segregation_principle">principe de ségrégation d’interface</a> a deux conséquences :</p>
<ol class="arabic simple">
<li>Le type des variables, paramètres et attributs doit être choisi
judicieusement pour restreindre au type minimum nécessaire par le code.</li>
<li>Une interface ne doit pas déclarer <em>trop</em> de méthodes.</li>
</ol>
<p>Le premier point implique qu’il est préférable de manipuler les objets à travers
leurs interfaces plutôt que d’utiliser le type réel de l’objet. Un exemple
classique en Java concerne l’API des <a class="reference internal" href="les_collections.html"><span class="doc">collections</span></a>.
Il s’agit de classes permettant de gérer un ensemble d’objets. Elles apportent
des fonctionnalités plus avancées que les tableaux. Par exemple la classe <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html">java.util.ArrayList</a>
permet de gérer une liste d’objets. Cette classe autorise l’ajout en fin de liste,
l’insertion, la suppression et bien évidemment l’accès à un élément selon son index
et le parcours complet des éléments.</p>
<p>Un programme qui crée une <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html">ArrayList</a> pour stocker un ensemble d’éléments
n’utilisera jamais une variable de type <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html">ArrayList</a> mais plutôt une variable
ayant le type d’une interface implémentée par cette classe.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Utilisation de l&#39;interface List</span>
<span class="n">List</span> <span class="n">maListe</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Utilisation de l&#39;interface Collection</span>
<span class="n">Collection</span> <span class="n">maListe</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Utilisation de l&#39;interface Iterable</span>
<span class="n">Iterable</span> <span class="n">maListe</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
</pre></div>
</div>
<p>Plus une partie d’une application a recours à des interfaces pour interagir
avec les autres parties d’une application, plus il est simple d’introduire
des nouvelles classes implémentant les interfaces attendues et qui pourront être
directement utilisées.</p>
<p>Le second point est lié au principe <a class="reference external" href="https://fr.wikipedia.org/wiki/SOLID_%28informatique%29">SOLID</a> de la <a class="reference external" href="https://fr.wikipedia.org/wiki/Principe_de_responsabilit%C3%A9_unique">responsabilité unique</a>.
Une interface est conçue pour représenter un type de relation entre la classe
qui l’implémente et ses clients. Plus le nombre de méthodes augmente, plus
il a de risque que l’interface représente en fait plusieurs types de relation.
Dans ce cas, l’héritage entre interfaces et/ou l’implémentation de plusieurs
interfaces deviennent une bonne solution pour isoler chaque relation.</p>
<p>Reprenons notre exemple de l’interface <em>Compte</em>. Si notre système
est composé d’un sous-système de consultation, d’un
sous-système de retrait et d’un sous-système de gestion de comptes alors cette
interface devrait probablement être séparée en plusieurs interfaces afin d’isoler
chaque responsabilité.</p>
<p>Une interface utilisée par le sous-système de consultation :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CompteConsultable</span> <span class="o">{</span>

  <span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">;</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Une interface utilisée par le sous-système de retrait :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">OperationDeRetrait</span> <span class="o">{</span>

  <span class="kt">int</span> <span class="nf">retirer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                  <span class="n">CompteBloqueException</span><span class="o">;</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Une interface plus complexe utilisée par le système de gestion de comptes :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Compte</span> <span class="kd">extends</span> <span class="n">CompteConsultable</span><span class="o">,</span> <span class="n">OperationDeRetrait</span> <span class="o">{</span>

  <span class="kt">void</span> <span class="nf">deposer</span><span class="o">(</span><span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                   <span class="n">CompteBloqueException</span><span class="o">;</span>

  <span class="k">default</span> <span class="kt">void</span> <span class="nf">transferer</span><span class="o">(</span><span class="n">Compte</span> <span class="n">destination</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span>
                                                     <span class="n">CompteBloqueException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">destination</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kt">int</span> <span class="n">montant</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getBalance</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">montant</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">destination</span><span class="o">.</span><span class="na">deposer</span><span class="o">(</span><span class="n">montant</span><span class="o">);</span>
    <span class="kt">boolean</span> <span class="n">retraitOk</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">retirer</span><span class="o">(</span><span class="n">montant</span><span class="o">);</span>
      <span class="n">retraitOk</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(!</span><span class="n">retraitOk</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">destination</span><span class="o">.</span><span class="na">retirer</span><span class="o">(</span><span class="n">montant</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="l-inversion-de-dependance">
<h2>L’inversion de dépendance<a class="headerlink" href="#l-inversion-de-dependance" title="Lien permanent vers ce titre">¶</a></h2>
<p>Lorsque nous avons vu les constructeurs, nous avons vu que nous pouvions réaliser
de <a class="reference internal" href="cycle_de_vie.html#injection-des-dependances"><span class="std std-ref">l’injection de dépendance</span></a> en passant comme
paramètres de constructeur les objets nécessaires au fonctionnement d’une classe
plutôt que de laisser la nouvelle instance créer ces objets elle-même. Grâce à la notion
d’interface, nous pouvons réaliser une injection de dépendance en découplant
totalement l’utilisation de l’objet passé par injection de son implémentation.</p>
<p>Si nous souhaitons créer une classe pour représenter une transaction bancaire,
nous pouvons réaliser l’implémentation suivante :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev.compte</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TransactionBancaire</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Compte</span> <span class="n">compte</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">montant</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Instant</span> <span class="n">date</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">TransactionBancaire</span><span class="o">(</span><span class="n">Compte</span> <span class="n">compte</span><span class="o">,</span> <span class="kt">int</span> <span class="n">montant</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">compte</span> <span class="o">=</span> <span class="n">compte</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">montant</span> <span class="o">=</span> <span class="n">montant</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">effectuer</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span> <span class="n">CompteBloqueException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isEffectuee</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">compte</span><span class="o">.</span><span class="na">retirer</span><span class="o">(</span><span class="n">montant</span><span class="o">);</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">annuler</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">OperationInterrompueException</span><span class="o">,</span> <span class="n">CompteBloqueException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span> <span class="n">isEffectuee</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">compte</span><span class="o">.</span><span class="na">deposer</span><span class="o">(</span><span class="n">montant</span><span class="o">);</span>
    <span class="n">date</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEffectuee</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">date</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">Instant</span> <span class="nf">getDate</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">date</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>L’implémentation précédente permet d’effectuer une transaction pour un compte donné
et un montant donné et mémorise la date. Elle permet également d’annuler la transaction.
Dans cette implémentation, nous avons réalisé une <strong>inversion de dépendance</strong>.
La transaction ne connaît pas la nature exacte de l’objet <em>Compte</em> qu’elle manipule.
La classe <em>TransactionBancaire</em> fonctionnera quelle que soit l’implémentation
sous-jacente de l’interface <em>Compte</em>.</p>
<p>L’inversion de dépendance est un principe de programmation objet qui stipule que
si une classe A est dépendante d’une classe B, alors il peut être souhaitable que,
non seulement la classe A reçoive une instance de B par injection, mais également
que B ne soit connue qu’à travers une interface.</p>
<p>L’inversion de dépendance est très souvent utilisée pour isoler les couches logicielles
d’une architecture. Au sein d’une application, nous pouvons disposer d’un ensemble
de classes pour gérer des opérations utilisateur et d’un ensemble de classes pour
assurer la persistance des informations.</p>
<img alt="_images/inversion_de_dependance.png" src="_images/inversion_de_dependance.png" />
<p>L’architecture logicielle peut utiliser l’inversion de dépendance pour assurer que
les opérations utilisateur qui ont besoin de réaliser des opérations persistantes
réalisent des appels à travers des interfaces qui sont injectées. D’un côté, on peut
imaginer implémenter différentes classes gérant la persistance pour sauver les informations
dans des fichiers, dans des bases de données ou sur des serveurs distants (et même
nulle part si on souhaite exécuter le code dans un environnement de test). D’un autre
côté on peut créer et faire évoluer un système de persistance en ayant une dépendance
minimale aux opérations utilisateur puisque le système de persistance doit juste
fournir des implémentations conformes aux interfaces.</p>
</div>
<div class="section" id="id1">
<h2>Exercice<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h2>
<div class="topic">
<p class="topic-title first">Tri des notes</p>
<p>Reprenez l’implémentation du système de gestion des diplômes des chapitres
précédents.</p>
<p>Faites évoluer la classe <em>Examen</em> afin d’ajouter un code pour un examen.
Par exemple, un contrôle peut avoir le code «&nbsp;JAVA-LANG001&nbsp;» et un projet «&nbsp;PHP-PRJ&nbsp;».</p>
<p>Ajoutez la méthode <em>getExamens</em> dans la classe <em>Diplome</em>. Cette méthode doit
retourner un tableau des examens du diplôme trié selon un critère fourni en paramètre.</p>
<p>Modifiez votre programme pour afficher successivement la liste des examens d’un diplôme
triée suivant :</p>
<ul class="simple">
<li>le code des examens</li>
<li>la note des examens</li>
<li>la date des examens</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Pour trier un tableau en Java, vous devez utiliser la méthode
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#sort-T:A-java.util.Comparator-">Arrays.sort(Object[], Comparator)</a>. Cette méthode prend en premier paramètre
le tableau à trier et en deuxième paramètre une implémentation de l’interface
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html">Comparator</a>. C’est l’implémentation de cette interface qui va être en charge
de comparer les éléments deux à deux lors du tri. Ainsi, vous devez fournir
une implémentation pour les trois tris demandés et la méthode <em>getExamens</em>
attend un paramètre de type <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html">Comparator</a>.</p>
</div>
</div>
<div class="topic">
<p class="topic-title first">Mise en place d’une interface de sauvegarde (à suivre)</p>
<p>On souhaite faire évoluer notre système de gestion des diplômes afin qu’il
puisse permettre de sauver les informations relatives à un étudiant et son diplôme.</p>
<p>Ajoutez une classe <em>Etudiant</em> qui contient au moins son code étudiant, son
nom et un diplôme.</p>
<p>Créer un interface <em>EtudiantDao</em>. <strong>DAO</strong> signifie <em>Data Access Object</em>.
On utilise cet acronyme pour désigner des classes dont la responsabilité
est d’accéder à des systèmes de sauvegardes (fichiers, bases de données…).
Comme on souhaite créer une abstraction du système de données, il est souhaitable
de déclarer une interface.</p>
<p>L’interface doit permettre de :</p>
<ul class="simple">
<li>sauvegarder un étudiant, son diplôme et ses examens</li>
<li>accéder à un étudiant selon son numéro.</li>
</ul>
<p>Comme nous ne disposons pas encore des outils nécessaires pour gérer des accès
aux fichiers ou aux bases de données, nous commencerons par une implémentation
naïve de l’interface qui garde simplement en mémoire l’étudiant sauvé. Pour cela,
créez une classe qui implémente l’interface <em>EtudiantDao</em> et qui se contente
de conserver dans un attribut l’instance de <em>Etudiant</em> à sauver.</p>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Si votre programme principal est constitué d’une seule méthode <strong>main</strong>
peut être devriez-vous penser à isoler chaque étape dans des méthodes, ou mieux,
dans des classes distinctes.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Le langage Java</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="compilation.html">Compilation &amp; exécution</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure_fondamentale.html">La structure fondamentale du langage</a></li>
<li class="toctree-l1"><a class="reference internal" href="premiere_classe.html">Une première classe</a></li>
<li class="toctree-l1"><a class="reference internal" href="types_primitifs.html">Les types primitifs</a></li>
<li class="toctree-l1"><a class="reference internal" href="operateurs.html">Les opérateurs</a></li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a></li>
<li class="toctree-l1"><a class="reference internal" href="tableau.html">Les tableaux</a></li>
<li class="toctree-l1"><a class="reference internal" href="attributs_et_methodes.html">Attributs &amp; méthodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="cycle_de_vie.html">Cycle de vie d’un objet</a></li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Les packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="relations_entre_objets.html">Les relations entre objets</a></li>
<li class="toctree-l1"><a class="reference internal" href="polymorphisme.html">Le polymorphisme</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_object.html">La classe Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_string.html">La classe String</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_exceptions.html">Les exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="classe_abstraite.html">Les classes abstraites</a></li>
<li class="toctree-l1"><a class="reference internal" href="enumeration.html">Les énumérations</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_dates.html">Les dates</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Les interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#declaration-d-un-interface">Déclaration d’un interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implementation-d-une-interface">Implémentation d’une interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attributs-et-methodes-statiques">Attributs et méthodes statiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heritage-d-interface">Héritage d’interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-interfaces-marqueurs">Les interfaces marqueurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implementation-par-defaut">Implémentation par défaut</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-segregation-d-interface">La ségrégation d’interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l-inversion-de-dependance">L’inversion de dépendance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="generiques.html">Méthodes et classes génériques</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_collections.html">Les collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="entrees_sorties.html">Les entrées/sorties</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_lambdas.html">Les lambdas</a></li>
<li class="toctree-l1"><a class="reference internal" href="streams.html">Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="classe_interne.html">Les classes internes</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_annotations.html">Les annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="jdbc.html">Accès aux bases de données : JDBC</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/api/index.html?overview-summary.html">API Java</a></li>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/">Documentation Java</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;
<a ref="author" href="mailto:david.gayerie.epsi@mailoo.org">David Gayerie</a>
<a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/fr/80x15.png" /></a>
.
      
    </div>

    

    
  </body>
</html>