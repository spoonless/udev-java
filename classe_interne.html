
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Les classes internes &#8212; documentation Le langage Java 1.0</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="prev" title="Les interfaces" href="interface.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="les-classes-internes">
<h1>Les classes internes<a class="headerlink" href="#les-classes-internes" title="Lien permanent vers ce titre">¶</a></h1>
<p>La façon la plus courante de déclarer une classe en Java est de créer un fichier
portant le nom de la classe avec l’extension <em>.java</em>. Cependant, il est également
possible de déclarer des classes dans des classes. On parle alors de classes
internes (<em>inner classes</em>). Cela est également vrai dans une certaine limite pour
les interfaces et les énumérations.</p>
<p>La déclaration des classes internes peut se faire dans l’ordre que l’on souhaite
à l’intérieur du bloc de déclaration de la classe englobante. Les classes internes
peuvent être ou non déclarées <strong>static</strong>. Ces deux cas correspondent à deux
usages particuliers des classes internes.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClasseEnglobante</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ClasseInterneStatic</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClasseInterne</span> <span class="o">{</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="les-classes-internes-static">
<h2>Les classes internes static<a class="headerlink" href="#les-classes-internes-static" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les classes internes déclarées <strong>static</strong> sont des classes comme les autres sauf
que l’espace de noms dans lequel elles sont déclarées est celui de la classe
englobante.</p>
<p>Cela a plusieurs conséquences :</p>
<ul class="simple">
<li>Le nom complet de la classe interne inclus le nom de la classe englobante (elle
agit comme un package)</li>
<li>La classe englobante et la classe iterne partage le même espace privé. Cela
signifie que les attributs et les méthodes privés déclarés dans la classe
englobante sont accessibles à la classe interne. Réciproquement, la classe
englobante peut avoir accés aux éléments privés de la classe interne.</li>
<li>Une instance de la classe interne ne peux pas avoir accès directement aux
attributs et aux méthodes de la classe englobante qui ne sont pas déclarés
<strong>static</strong>.</li>
</ul>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">À faire</p>
<p class="last">exemple de classe interne static et préciser le nom complet de la classe</p>
</div>
<p>Une classe interne <strong>static</strong> est un moyen de dissimuler l’implémentation
d’une interface. La classe englobante agit comme une <em>fabrique</em>.</p>
<p>Une classe interne <strong>static</strong> est également utile pour éviter de séparer
dans des fichiers différents de petites classes utilitaires et ainsi de faciliter
la lecture du code. Dans l’exemple ci-dessous, plutôt que de créer un fichier
spécifique pour l’implémentation d’un comparateur, on ajoute son implémentation
comme une classe interne.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.cgi.udev</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Comparator</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Individu</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Comparateur</span> <span class="kd">implements</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Individu</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Individu</span> <span class="n">i1</span><span class="o">,</span> <span class="n">Individu</span> <span class="n">i2</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">i1</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">i2</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="kt">int</span> <span class="n">cmp</span> <span class="o">=</span> <span class="n">i1</span><span class="o">.</span><span class="na">nom</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">i2</span><span class="o">.</span><span class="na">nom</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">cmp</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">cmp</span> <span class="o">=</span> <span class="n">i1</span><span class="o">.</span><span class="na">prenom</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">i2</span><span class="o">.</span><span class="na">prenom</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">cmp</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">prenom</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">nom</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Individu</span><span class="o">(</span><span class="n">String</span> <span class="n">prenom</span><span class="o">,</span> <span class="n">String</span> <span class="n">nom</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">prenom</span> <span class="o">=</span> <span class="n">prenom</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">nom</span> <span class="o">=</span> <span class="n">nom</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">prenom</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">nom</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Individu</span><span class="o">[]</span> <span class="n">individus</span> <span class="o">=</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">Individu</span><span class="o">(</span><span class="s">&quot;John&quot;</span><span class="o">,</span> <span class="s">&quot;Eod&quot;</span><span class="o">),</span>
    <span class="k">new</span> <span class="n">Individu</span><span class="o">(</span><span class="s">&quot;Annabel&quot;</span><span class="o">,</span> <span class="s">&quot;Doe&quot;</span><span class="o">),</span>
    <span class="k">new</span> <span class="n">Individu</span><span class="o">(</span><span class="s">&quot;John&quot;</span><span class="o">,</span> <span class="s">&quot;Doe&quot;</span><span class="o">)</span>
<span class="o">};</span>

<span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">individus</span><span class="o">,</span> <span class="k">new</span> <span class="n">Individu</span><span class="o">.</span><span class="na">Comparateur</span><span class="o">());</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">individus</span><span class="o">));</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, la classe <em>Individu</em> fournit publiquement une
implémentation d’un <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html">Comparator</a> qui permet de comparer deux instances en
fonction de leur nom et de leur prénom. Notez que l’implémentation de la
méthode <em>compare</em> peut accéder aux attributs privés <em>nom</em> et <em>prenom</em> de la
classe englobante.</p>
</div>
<div class="section" id="id1">
<h2>Les classes internes<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une instance d’une classe interne qui n’est pas déclarée avec le mot-clé
<strong>static</strong> est liée au contexte d’exécution d’une instance de la classe
englobante.</p>
<p>Comme pour les classes internes <strong>static</strong>, le nom complet de classe interne
inclus celui de la classe englobante et les deux classes partagent le même
espace privé. Mais il y a également d’autres conséquences :</p>
<ul class="simple">
<li>une instance d’une classe interne ne peut être crée que s’il existe un contexte
d’exécution associé à une instance de la classe englobante. Donc, on ne peut
créer une instance d’une classe interne que dans un constructeur ou dans
une méthode de la classe englobante ou dans une de ses classes internes.</li>
<li>une instance d’une classe interne a accès directement aux attributs de l’instance
dans le contexte de laquelle elle a été créée.</li>
</ul>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">À faire</p>
<ul class="last simple">
<li>classe interne static</li>
<li>intérêt des classes internes : cacher l’implémentation d’interface</li>
<li>pas de portée sur les classes (mère/fille, fille/mère et soeur/soeur)</li>
<li>classe interne et closure</li>
<li>classe anonyme (limitation : pas de possibilité de créer un constructeur)</li>
<li>classe dans une méthode (final avec les variables et les attributs)</li>
<li>shadowing (MyOutterClass.this.attribut)</li>
<li>cas des interfaces</li>
<li>cas des énumérations (static par defaut)</li>
<li>cas particulier de plusieurs classes dans une unité de compilation</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Le langage Java</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="compilation.html">Compilation &amp; exécution</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure_fondamentale.html">La structure fondamentale du langage</a></li>
<li class="toctree-l1"><a class="reference internal" href="premiere_classe.html">Une première classe</a></li>
<li class="toctree-l1"><a class="reference internal" href="types_primitifs.html">Les types primitifs</a></li>
<li class="toctree-l1"><a class="reference internal" href="operateurs.html">Les opérateurs</a></li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a></li>
<li class="toctree-l1"><a class="reference internal" href="attributs_et_methodes.html">Attributs &amp; méthodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="tableau.html">Les tableaux</a></li>
<li class="toctree-l1"><a class="reference internal" href="cycle_de_vie.html">Cycle de vie d’un objet</a></li>
<li class="toctree-l1"><a class="reference internal" href="package.html">Les packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="relations_entre_objets.html">Les relations entre objets</a></li>
<li class="toctree-l1"><a class="reference internal" href="polymorphisme.html">Le polymorphisme</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_object.html">La classe Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="la_classe_string.html">La classe String</a></li>
<li class="toctree-l1"><a class="reference internal" href="les_exceptions.html">Les exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="generiques.html">Méthodes et classes génériques</a></li>
<li class="toctree-l1"><a class="reference internal" href="classe_abstraite.html">Les classes abstraites</a></li>
<li class="toctree-l1"><a class="reference internal" href="enumeration.html">Les énumérations</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Les interfaces</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Les classes internes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#les-classes-internes-static">Les classes internes static</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Les classes internes</a></li>
</ul>
</li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/">Documentation Java</a></li>
    
    <li class="toctree-l1"><a href="http://docs.oracle.com/javase/8/docs/api/index.html?overview-summary.html">API Java</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;
<a ref="author" href="mailto:david.gayerie.epsi@mailoo.org">David Gayerie</a>
<a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/fr/80x15.png" /></a>
.
      
    </div>

    

    
  </body>
</html>